!function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var i=n(4),o=r(i),s=n(1),a=r(s),u=n(2),c=r(u),l=new o["default"].ServiceLocator;l.register("app",a["default"]),l.register("controller",c["default"]);var f=l.get("app");f.run()},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){n(this,e),this.controller={}}return r(e,[{key:"run",value:function(){this.controller.addEventListeners()}}],[{key:"needs",value:function(){return["controller"]}}]),e}();t["default"]=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(5),a=r(s),u=n(3),c=r(u),l=function(){function e(){i(this,e),this.controls=a["default"].map(document.querySelectorAll("[data-action]")),this.keyMap={"play-pause":"space",forward:"right",back:"left"}}return o(e,[{key:"addEventListeners",value:function(){var e=this.click.bind(this);console.log(this.controls),this.controls.forEach(function(t){t.addEventListener("click",function(t){e(t,this)})})}},{key:"click",value:function(e,t){var n=t.dataset.action;console.log(t.dataset.action,this),c["default"].send(this.keyMap[n])}}]),e}();t["default"]=l},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){n(this,e)}return r(e,null,[{key:"send",value:function(t){e._request("/api/"+t,"GET",function(e){console.log(e)},function(e){console.log(e)})}},{key:"_request",value:function(e,t,n,r){var i=new XMLHttpRequest;i.open(t,e,!0),i.setRequestHeader("Content-Type","application/javascript"),i.onload=function(){if(i.status>=200&&i.status<400)try{var e=JSON.parse(i.responseText);n(e,i)}catch(t){r(i,{exception:t})}else r(i)},i.onerror=function(){r(i)},i.send()}}]),e}();t["default"]=i},function(e,t,n){!function(e){var t=e;!function(){t.Config={}}(),function(){!function(){!function(e){var t=!1,n=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;this.Class=function(){},Class.extend=function(e){function r(){!t&&this.init&&this.init.apply(this,arguments)}var i=this.prototype;t=!0;var o=new this;t=!1;for(var s in e)o[s]="function"==typeof e[s]&&"function"==typeof i[s]&&n.test(e[s])?function(e,t){return function(){var n=this._super;this._super=i[e];var r=t.apply(this,arguments);return this._super=n,r}}(s,e[s]):e[s];return r.prototype=o,r.prototype.constructor=r,r.extend=arguments.callee,r}}(this)}(),t.CoreObject=Class.extend({__guid:null,init:function(){this.__guid=t.CoreObject.createGuid()},guid:function(){return this.__guid},defineProperty:function(e,t){return t.overwrite===!1&&this[e]?this:(Object.defineProperty(this,e,t),this)},defineProperties:function(e){return Object.defineProperties(this,e),this},clone:function(){var e=this,n=new e.constructor;for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);return n.__guid=t.CoreObject.createGuid(),n},bind:function(e){var n,r=this;if("function"==typeof e)n=e;else{if("function"!=typeof r[e])throw new t.Error("Argument method must be either a method name or a function");n=r[e]}return function(){var e=Array.prototype.slice.call(arguments);return e.push(this),n.apply(r,e)}}}),t.CoreObject.__lastGuid=0,t.CoreObject.createGuid=function(){return"irLib-"+ ++t.CoreObject.__lastGuid}}(),function(){var e=t.Error=function(e,t,n){this.message=e,this.code=t,this.userInfo=n};e.prototype=Object.create(Error.prototype),e.prototype={constructor:e,toString:function(){return"[IrLib.Error] "+(this.code?"#"+this.code+":":"")+this.message}},t.MissingImplementationError=function(e,t){this.message=e,this.code=t||1435238939},t.MissingImplementationError.prototype=Object.create(Error.prototype),t.MissingImplementationError.prototype={constructor:t.MissingImplementationError,toString:function(){return"[IrLib.MissingImplementationError] "+(this.code?"#"+this.code+":":"")+this.message}};var e=t.TypeError=function(e,t,n){this.message=e,this.code=t,this.userInfo=n};e.prototype=Object.create(TypeError.prototype),e.prototype={constructor:e,toString:function(){return"[IrLib.TypeError] "+(this.code?"#"+this.code+":":"")+this.message}}}(),function(){t.Utility=t.Utility||{};var e=t.Utility.GeneralUtility={isDomNode:function(e){return!(!e||!e.nodeName)},domNode:function(t){return e.isDomNode(t)?t:"string"==typeof t?document.querySelector(t):null},toArray:function(e){if("undefined"==typeof e)return[];if(Array.isArray(e))return e.slice();if("object"==typeof e){for(var t=[],n=Object.keys(e),r=n.length,i=0;i<r;i++)t.push(e[n[i]]);return t}return[e]},valueForKeyPathOfObject:function(e,t,n){if("string"!=typeof e)throw new TypeError("Key path must be of type string, "+typeof e+" given");var r,i,o=e.split("."),s=o.length,a=t;for(i=0;i<s;i++){if(r=o[i],"object"!=typeof a){if(n)return;throw new TypeError("Can not get key "+r+" of value of type "+typeof a)}a=a[r]}return a},setValueForKeyPathOfObject:function(t,n,r){if("string"!=typeof n)throw new TypeError("Key path must be of type string, "+typeof n+" given");var i,o,s,a=n.lastIndexOf(".");if(a===-1?(s=r,o=n):(i=n.substr(0,a),o=n.substr(a+1),s=e.valueForKeyPathOfObject(i,r)),"object"!=typeof s)throw new TypeError("Can not set key "+n+" of value of type "+typeof s);s[o]=t},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},clone:function(t,n){var r;if(arguments.length<2&&(n=10),null===t||"object"!=typeof t)return t;if(t instanceof Date)return r=new Date,r.setTime(t.getTime()),r;if(t instanceof Array){r=[];for(var i=0,o=t.length;i<o;i++)n-1>0?r[i]=e.clone(t[i],n-1):r[i]=t[i];return r}r={};for(var s in t)t.hasOwnProperty(s)&&(n-1>0?r[s]=e.clone(t[s],n-1):r[s]=t[s]);return r},addClass:function(t,n){t=e.domNode(t),t&&(t.classList?t.classList.add(n):t.className+=" "+n)}},n=function(){},r=t.Logger="object"==typeof console?console:{};r.log||(r.log=n),r.debug||(r.debug=n),r.info||(r.info=n),r.warn||(r.warn=n),r.error||(r.error=n)}(),function(){var e=t.Utility.GeneralUtility,n=t.Error;t.Controller=t.CoreObject.extend({_view:null,_registeredEvents:[],init:function(e){arguments.length>0?this.setView(e):this.view&&this.setView(this.view),this.defineProperty("view",{enumerable:!0,get:this.getView,set:this.setView})},handleEvent:function(e){var n,r,i=this,o=e.type,s=e.target,a=i.events;if(a||"object"!=typeof e.irController||(i=e.irController,a=i.events),"function"==typeof s.getAttribute&&(n=s.getAttribute("data-irlib-target")),n){var u=Object.keys(a).filter(function(e){var t=e.split(":");return t.length>1&&t[1]===n&&t[0]===o});u.length>0&&(r=a[u[0]])}return!r&&a&&a[o]&&(r=a[o]),"function"==typeof r?r.call(i,e):!r||(t.Logger.error("Event handler implementation is of type "+typeof e),!1)},setView:function(t){this._assertView(t),"string"==typeof t?this._view=e.domNode(t):this._view=t},getView:function(){return this._view},catchAllViewEvents:function(){var e,n,r=this._registeredEvents,i=this._splitEventIdentifier,o=this.view;if(o){e=o instanceof t.View.Interface?document.createElement("div"):o;for(n in e)"on"===n.substr(0,2)&&r.push(i(n.substr(2))[0]);this._addListenersForRegisteredEventTypes()}else t.Logger.warn("Can not catch all events because the view not set");return this},initializeEventListeners:function(){var e,n,r=this._registeredEvents,i=this._splitEventIdentifier,o=this.view;if(o){for(e=this.eventNames(),n=0;n<e.length;n++)r.push(i(e[n])[0]);this._addListenersForRegisteredEventTypes()}else t.Logger.warn("Can not add event listener because the view not set");return this},removeEventListeners:function(){var e,n=this._registeredEvents,r=this.view;if(r){for(e=0;e<n.length;e++)r.removeEventListener(n[e],this,!1);this._registeredEvents=[]}else t.Logger.warn("Can not remove event listeners because the view not set")},eventNames:function(){return Object.keys(this.events)},_addListenersForRegisteredEventTypes:function(){var e,t=this._registeredEvents,n=t.length,r=this.view;if(r)for(e=0;e<n;e++)r.addEventListener(t[e],this,!1)},_splitEventIdentifier:function(e){return e.split?e.split(":"):e},_assertView:function(r){if(!r)throw new n("No view given",1433355412);var i=t.View&&t.View.Interface?t.View.Interface:function(){};if(!(e.domNode(r)||r instanceof i))throw new n("No view given",1433355412,r)},events:{}});var n=t.Error;t.Dictionary=t.CoreObject.extend({init:function(e){var t=function(e){for(var t,n=Object.keys(e),r=n.length,i=0;i<r;i++)t=n[i],this[t]=e[t]};if(arguments.length>0){if("object"!=typeof e)throw new n("Initialization argument has to be of type object, "+typeof e+" given",1435219260);null===e&&(e={}),t.call(this,e)}return this},values:function(){for(var e=[],t=this.keys(),n=t.length,r=0;r<n;r++)e.push(this[t[r]]);return e},keys:function(){return Object.keys(this)},forEach:function(e,t){this.map(e,t)},map:function(e,t){if("function"!=typeof e)throw new TypeError('Argument "callback" is not of type function');var n,r,i=[],o=this.keys(),s=o.length,a=e;t&&(a=e.bind(t));for(var u=0;u<s;u++)n=o[u],r=this[n],i.push(a(r,n,this));return i}}),t.Path=function(e){this.absolute=!1,e?("/"===e.charAt(0)&&(this.absolute=!0),this.components=e.split("/").filter(function(e){return!!e})):this.components=[]},t.Path.prototype.toString=function(){return(this.absolute?"/":"")+this.components.join("/")},t.Path.prototype.isAbsolute=function(){return this.absolute},t.Path.prototype.isRelative=function(){return!this.absolute};var e=t.Utility.GeneralUtility,n=t.Error;t.ServiceLocator=t.CoreObject.extend({services:null,serviceFactory:null,recursionLevel:0,init:function(){this.services={},this.serviceFactory={},this.set("serviceLocator",this)},registerMultiple:function(e){var t,n,r=Object.keys(e);for(n=0;n<r.length;n++)t=r[n],this.register(t,e[t]);return this},register:function(e,t){return this._assertIdentifier(e),this._assertFactory(t),this.serviceFactory[e]=t,this},set:function(e,t){return this._assertIdentifier(e),this.services[e]=t,this},get:function(e){this._assertIdentifier(e);var t=this.services[e];return t||(t=this.create(e),this.set(e,t)),t},create:function(e,t){this._assertIdentifier(e);var r,i,o=arguments.length>1;if(arguments.length>2)throw new n("Too many arguments");if(i=this.serviceFactory[e],!i)throw new n("Could not find service with identifier "+e);return r=i.prototype&&i.prototype.constructor?this.resolveDependencies(o?new i(t):new i,i):o?i(t):i(),"function"==typeof r.didResolveDependencies&&r.didResolveDependencies(),r},resolveDependencies:function(e,t){var r=null;if(e&&"object"==typeof e.needs&&(r=e.needs),t.needs&&"function"==typeof t.needs&&(r=t.needs()),r){var i,o,s,a,u=r.length;if(++this.recursionLevel>1e3)throw new n("Maximum recursion level exceeded",1434301204);for(a=0;a<u;a++)i=r[a].split(":",2),s=i[0],o=i[1]||s,e[o]=this.get(s);this.recursionLevel--}return e},_assertIdentifier:function(e){if("string"!=typeof e)throw new n("Given service name is not of type string",1433683510)},_assertFactory:function(e){if("function"!=typeof e)throw new n("Given service constructor is not callable",1433683511)}}),t.Url=function(e){if(this._prepareDoubleStash=function(e){return"//"===e.substr(0,2)?"undefined"!=typeof window?window.location.protocol+e:"http:"+e:e},arguments.length>0){var t=document.createElement("a"),n="undefined"!=typeof window?window.location:{};t.href=this._prepareDoubleStash(""+e),this._protocol=t.protocol&&":"!==t.protocol?t.protocol:n.protocol,this._port=t.port||n.port,this._hostname=t.hostname||n.hostname,this._host=t.host||(this._port?this._hostname+":"+this._port:this._hostname),this.setPathname(t.pathname||n.pathname),this.setHash(t.hash),this.setSearch(t.search)}else this._protocol="",this._host="",this._hostname="",this._port="",this._hash="",this._search="",this.setPathname("");Object.defineProperties(this,{host:{get:this.getHost,set:this.setHost},hostname:{get:this.getHostname,set:this.setHostname},port:{get:this.getPort,set:this.setPort},pathname:{get:this.getPathname,set:this.setPathname},hash:{get:this.getHash,set:this.setHash},protocol:{get:this.getProtocol,set:this.setProtocol},search:{get:this.getSearch,set:this.setSearch}})},t.Url.current=function(){if("undefined"==typeof window)throw new t.TypeError("window not defined in this context");return new t.Url(window.location.href)},t.Url.prototype={getHost:function(){return this._host},setHost:function(e){var t=e.split(":");this._host=e,this._hostname=t[0],this._port=t[1]},getHostname:function(){return this._hostname},setHostname:function(e){this._hostname=e,this._host=e+":"+this._port},getPort:function(){return this._port},setPort:function(e){this._port=e,this._host=this._hostname+":"+e},getProtocol:function(){return this._protocol},setProtocol:function(e){this._protocol=e},getPathname:function(){return this._pathname},setPathname:function(e){e=""+e,e&&"/"===e[0]||(e="/"+e),this._pathname=e},getHash:function(){return this._hash},setHash:function(e){e=""+e,e&&"#"!==e.charAt(0)&&(e="#"+e),this._hash=e},getSearch:function(){return this._search},setSearch:function(e){e=""+e,e&&"?"!==e[0]&&(e="?"+e),this._search=e},isLocal:function(){return window.location.host==this.host},isSamePage:function(e){var n=t.Url.current();return n.host==this.host&&n._protocol===this._protocol&&n.pathname===this.pathname&&(e||n.search===this.search)},isCurrent:function(){return this.isEqualTo(t.Url.current())},isEqualTo:function(e){return""+e==""+this},toString:function(){return(this._protocol?this._protocol+"//":"")+this.host+this.pathname+this.search+this._hash}}}(),function(){!function(){!function(){t.View=t.View||{},t.View.Interface=t.CoreObject.extend({init:function(e,t){this._super()},render:function(){throw new t.MissingImplementationError("render")},setVariables:function(e){throw new t.MissingImplementationError("setVariables")},assignVariable:function(e,n){throw new t.MissingImplementationError("assignVariable")},appendTo:function(e){throw new t.MissingImplementationError("appendTo")},remove:function(){throw new t.MissingImplementationError("remove")},addEventListener:function(e,n,r){throw new t.MissingImplementationError("addEventListener")},dispatchEvent:function(e){throw new t.MissingImplementationError("dispatchEvent")},toString:function(){throw new t.MissingImplementationError("toString")}})}(),t.View.AbstractVariableView=t.View.Interface.extend({_variables:null,_computed:null,init:function(){this._super(),"object"==typeof this.variables?this.setVariables(this.variables):this.setVariables({}),"object"==typeof this.computed&&this.setComputed(this.computed),this.defineProperties({variables:{enumerable:!0,get:this.getVariables,set:this.setVariables},computed:{enumerable:!0,get:this.getComputed,set:this.setComputed}})},toString:function(){throw new t.MissingImplementationError("assignVariable")},setVariables:function(e){if("object"!=typeof e)throw new TypeError("Initialization argument has to be of type object, "+typeof e+" given");return e instanceof t.Dictionary?this._variables=e:this._variables=new t.Dictionary(e),this._needsRedraw=!0,this},assignVariable:function(e,t){return this._variables[e]=t,this._needsRedraw=!0,this},getVariables:function(){return this._variables},setComputed:function(e){if("object"!=typeof e)throw new TypeError("Initialization argument has to be of type object, "+typeof e+" given");return e instanceof t.Dictionary?this._computed=e:this._computed=new t.Dictionary(e),this._needsRedraw=!0,this},getComputed:function(){return this._computed}})}(),t.View.AbstractContextAwareView=t.View.AbstractVariableView.extend({_context:null,init:function(){this._super(),"undefined"!=typeof this.context&&(this._context=this.context),this.defineProperty("context",{enumerable:!0,get:this.getContext,set:this.setContext})},getContext:function(){return this._context},setContext:function(e){return this._context=e,this}}),t.View.AbstractDomView=t.View.AbstractContextAwareView.extend({tagName:"div",_eventListeners:null,_needsRedraw:!0,_dom:null,_lastInsertedNode:null,init:function(){var e=this;this._super(),this._eventListeners={},"object"==typeof this.eventListeners?new t.Dictionary(this.eventListeners).forEach(function(t,n){e.addEventListener(n,t)}):"object"==typeof this.events&&new t.Dictionary(this.events).forEach(function(t,n){e.addEventListener(n,t)}),this.defineProperty("needsRedraw",{enumerable:!0,get:this.getNeedsRedraw})},render:function(){if(this._needsRedraw){delete this._dom;var e=this.template;if(!e)throw new ReferenceError("Template not specified");this._dom=this._createDom(this.toString()),this._needsRedraw=!1}return this._dom},getNeedsRedraw:function(){return this._needsRedraw},isVisible:function(){var e=this._dom;return!!(e&&e.parentNode&&document.body.contains(e))},appendTo:function(e){if(!e||"function"!=typeof e.appendChild)throw new TypeError("Given element is not a valid DOM Node");return this.render(),this._lastInsertedNode?e.replaceChild(this._dom,this._lastInsertedNode):e.appendChild(this._dom),this._lastInsertedNode=this._dom,this.addStoredEventListeners(),this},reload:function(e){var t=this._dom?this._dom.parentNode:this._lastInsertedNode?this._lastInsertedNode.parentNode:null;if(!t)throw new ReferenceError("Can not reload because the view does not seem to be in the DOM");return(e||this._needsRedraw)&&(this._needsRedraw=!0,this.appendTo(t)),this},remove:function(){var e=this._lastInsertedNode;return e&&e.parentNode&&(e.parentNode.removeChild(e),this._lastInsertedNode=null),this},handleEvent:function(e){var n,r,i,o=this._eventListeners[e.type];if(o)for(n=this._patchEvent(e),i=0;i<o.length;i++){if(r=o[i],"undefined"==typeof r)throw new TypeError('Implementation for event type "'+e.type+'" is undefined');"function"==typeof r?r.call(this,n):r.handleEvent&&r.handleEvent.call(r,n)}else t.Logger.log(e)},_patchEvent:function(e){return e.irTarget=this,e},addEventListener:function(e,t,n){var r=this._eventListeners;r[e]||(r[e]=[t]),r[e].indexOf(t)===-1&&r[e].push(t),this._addEventListeners(this.render(),[e])},_addEventListeners:function(e,t){var n,r,i=t.length;for(n=0;n<i;n++)r=t[n],e.addEventListener(r,this)},addStoredEventListeners:function(){if(!this._dom)throw new ReferenceError("DOM is not render yet");this._addEventListeners(this._dom,Object.keys(this._eventListeners))},dispatchEvent:function(e){this.render().dispatchEvent(e)},_createDom:function(e){var t=document.createElement(this.tagName);return e&&(t.innerHTML=e),t},clone:function(){var e=this,n=new e.constructor;for(var r in e)if(e.hasOwnProperty(r)){if("_dom"===r||"_lastInsertedNode"===r||"_eventListeners"===r)continue;n[r]=e[r]}return n.__guid=t.CoreObject.createGuid(),n}}),t.View=t.View||{},t.View.ContextInterface=function(){},t.View.ContextInterface.prototype.setContext=function(){throw new t.MissingImplementationError("setContext")},t.View.ContextInterface.prototype.getContext=function(){throw new t.MissingImplementationError("getContext")},function(){t.View.Template=t.View.AbstractDomView.extend({needs:["serviceLocator"],serviceLocator:null,_template:"",_templateBlocks:null,_templateParser:null,_lastConditionStateStack:[],_subviewPlaceholders:null,_renderSubviewsAsPlaceholders:!1,init:function(e,n){if(this._super(e,n),arguments.length>0){if("string"!=typeof e)throw new TypeError('Argument "template" is not of type string');this.setTemplate(e)}else"string"==typeof this.template&&this.setTemplate(this.template.slice(0));this._subviewPlaceholders=new t.Dictionary,arguments.length>1&&this.setVariables(n),this.defineProperties({template:{enumerable:!0,get:this.getTemplate,set:this.setTemplate}})},toString:function(){return this._renderBlocks()},render:function(){if(this._needsRedraw){delete this._dom;var e=this.template;if(!e)throw new ReferenceError("Template not specified");this._renderSubviewsAsPlaceholders=!0,this._dom=this._createDom(this.toString()),this._renderSubviewsAsPlaceholders=!1,this._needsRedraw=!1}return this._dom},_renderBlocks:function(){var e,n,r,i,o=t.View.Parser.BlockType,s=t.View.State,a=this.getTemplateBlocks(),u=a.length,c=this._escapeHtml,l=this._resolveVariable.bind(this),f=this._renderExpression.bind(this),h="";for(i=0;i<u;i++)switch(r=a[i],r.type){case o.VARIABLE:e=l(r.content),n=r.meta,n.isSafe||(e=c(e)),h+=e;break;case o.EXPRESSION:var p=new s(i,a);h+=f(r,p),i=p.index;break;case o.STATIC:default:h+=r.content}return h},_renderExpression:function(e,n){var r,i,o,s=t.View.Parser.ExpressionType,a=e.content.split(" "),u=this._lastConditionStateStack,c=e.meta;switch(c.expressionType){case s.VIEW:i=this._resolveView(a[1]),i.setContext(this),i.setVariables(this.variables),this._renderSubviewsAsPlaceholders?(o="irLibView-"+i.guid(),this._subviewPlaceholders[o]=i,r='<script id="'+o+'" type="text/x-placeholder"></script>'):r=i.toString();break;case s.ELSE:u.pop()===!0&&(n.index++,this._scanToEndExpression(s.CONDITIONAL_START,s.CONDITIONAL_END,n)),r="";break;case s.CONDITIONAL_START:if(a.length<2)throw new ReferenceError("Condition missing");var l=a[1],f=this._resolveVariable(l);this._evaluateConditionValue(f)?u.push(!0):(n.index++,this._scanToEndExpression(s.CONDITIONAL_START,s.CONDITIONAL_END,n),u.push(!1)),r="";break;case s.CONDITIONAL_END:r="";break;case s.UNKNOWN:default:r="{%"+e.content+"%}"}return r},_evaluateConditionValue:function(e){return Array.isArray(e)&&e.length>0||"object"==typeof e&&Object.keys(e).length>0||!!e},_scanToEndExpression:function(e,n,r){for(var i,o,s=r.blockStream,a=s.length,u=t.View.Parser.BlockType.EXPRESSION,c=t.View.Parser.ExpressionType.ELSE,l=1,f=r.index,h=!1;f<a;f++)if(i=s[f],i.type===u)if(o=i.meta.expressionType,o===e)l++;else if(o===n){if(l--,l<1){h=!0;break}}else if(1===l&&o===c){h=!0;break}h||t.Logger.log("Not balanced"),r.index=f},_resolveVariable:function(e){var n;try{n=t.Utility.GeneralUtility.valueForKeyPathOfObject(e,this.getVariables(),!1),"function"==typeof n&&(n=n(this))}catch(r){if(!(r instanceof TypeError))throw r}return n||e.indexOf(".")!==-1||(n=this._resolveAndEvaluateComputed(e)),void 0!==n?n:""},_resolveAndEvaluateComputed:function(e){var t,n=this.computed;if(n)return t=n[e],"function"==typeof t?t.call(this):void 0},_resolveView:function(e){var n,r=this.serviceLocator;if(!r)throw new ReferenceError('Service Locator must be set to resolve views for identifier "'+e+'"');try{n=this.serviceLocator.get(e)}catch(i){}if(n instanceof t.View.Interface)return n;throw new ReferenceError('No view for identifier "'+e+'"')},_escapeHtml:function(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};return String(e).replace(/[&<>"'\/]/g,function(e){return t[e]})},replaceSubviewPlaceholders:function(){var e=this._dom;this._subviewPlaceholders.forEach(function(t,n){var r=e.querySelector("#"+n);if(!r||!r.parentNode)throw new ReferenceError("Could not find subview placeholder #"+n);r.parentNode.replaceChild(t.render(),r),t.addStoredEventListeners()}),this._subviewPlaceholders=new t.Dictionary},appendTo:function(e){this._super(e),this.replaceSubviewPlaceholders()},setTemplate:function(e){var t=e.trim();return this._isSelector(t)?this._template=this._getTemplateForSelector(t):this._template=t,this._needsRedraw=!0,this._templateBlocks=null,this},getTemplate:function(){return this._template},getTemplateBlocks:function(){if(!this._templateBlocks){var e=this.getTemplateParser();this._templateBlocks=e.parse(this._template)}return this._templateBlocks},_isSelector:function(e){if("string"!=typeof e)return!1;if(e.indexOf("<")!==-1||e.indexOf("{")!==-1)return!1;var t=e.charAt(0);return"#"===t||"."===t||/^[a-z]/i.test(t)},_getTemplateForSelector:function(e){var t,n=document.querySelector(e);return n?(t=n.innerHTML,t?t.trim():null):null},getTemplateParser:function(){return this._templateParser||(this._templateParser=new t.View.Parser.Parser),this._templateParser},clone:function(){var e=this._super();return e._subviewPlaceholders=new t.Dictionary,e._lastConditionStateStack=[],e}})}(),t.View.LoopView=t.View.AbstractDomView.extend({needs:["serviceLocator"],serviceLocator:null,_content:null,_templateView:null,_originalTemplate:"",_asKey:"this",init:function(e,t,n){this._super(),e?this.setTemplate(e):"string"==typeof this.template&&this.setTemplate(this.template.slice(0)),t?this.setContent(t):this.content&&this.setContent(this.content),n?this._asKey=n:"string"==typeof this.asKey&&this.setAsKey(this.asKey),"undefined"!=typeof this.context&&(this._context=this.context),this.defineProperties({content:{enumerable:!0,get:this.getContent,set:this.setContent},asKey:{enumerable:!0,get:this.getAsKey,set:this.setAsKey},needsRedraw:{enumerable:!0,get:this.getNeedsRedraw},template:{enumerable:!0,get:this.getTemplateView,set:this.setTemplate}})},render:function(){if(this._needsRedraw){delete this._dom;var e=this._createDom();this._render(e),this._dom=e,this._needsRedraw=!1}return this._dom},toString:function(){return this._render()},_render:function(e){var n=this._content;if(null===n)throw new ReferenceError("No content defined");var r,i,o,s,a=n.length,u=this.getTemplateView(),c=this.getAsKey(),l=this._computed,f="";if(!u)throw new ReferenceError("Template not specified");for(u.setContext(this),l&&u.setComputed(l),s=0;s<a;s++)r=u.clone(),i=n[s],o={_meta:{iteration:s,first:0===s,last:s===a}},o[c]=i,r.setVariables(o),e?(e.appendChild(r.render()),(r instanceof t.View.Template||"function"==typeof r.replaceSubviewPlaceholders)&&r.replaceSubviewPlaceholders()):f+=r.toString();return f},setContent:function(e){if(!Array.isArray(e))throw new TypeError('Argument "content" has to be of type object, '+typeof e+" given");return this._content=e,this._needsRedraw=!0,this},getContent:function(){return this._content},setVariables:function(e){return this._super(e),"undefined"!=typeof e.content&&this.setContent(e.content),this},setAsKey:function(e){return this._asKey=e,this},getAsKey:function(){return this._asKey},setTemplate:function(e){if(!(e instanceof t.View.Interface)&&"string"!=typeof e)throw new TypeError("Invalid type for template, "+typeof content+" given");return this._originalTemplate=e,this},getTemplateView:function(){return this._templateView||(this._templateView=this._createTemplateViewFromTemplate()),this._templateView},_createTemplateViewFromTemplate:function(){var e,n=this.serviceLocator,r=this._originalTemplate;if("string"==typeof r)e=new t.View.Template(r),n&&n.resolveDependencies(e,t.View.Template);else{if(!(r instanceof t.View.Interface))throw new TypeError("Invalid type for template, "+typeof content+" given");e=r}return e},getContext:function(){return this._context},setContext:function(e){return this._context=e,this}}),t.View=t.View||{},t.View.State=function(e,t){this.index=0|e,this.blockStream=t},t.View=t.View||{},t.View.SubViewInterface=function(){},t.View.SubViewInterface.prototype.toString=function(){throw new t.MissingImplementationError("toString")},t.View=t.View||{},t.View.VariableViewInterface=function(){},t.View.VariableViewInterface.prototype.setVariables=function(e){throw new t.MissingImplementationError("setVariables")},t.View.VariableViewInterface.prototype.assignVariable=function(e,n){throw new t.MissingImplementationError("assignVariable")},t.View.VariableViewInterface.prototype.getVariables=function(){throw new t.MissingImplementationError("getVariables")}}(),function(){t.View.Parser=t.View.Parser||{},t.View.Parser.BlockType={STATIC:"STA",VARIABLE:"VAR",REPEATING:"REP",EXPRESSION:"EXP",CONDITIONAL:"CON"},t.View.Parser=t.View.Parser||{},t.View.Parser.Block=function(e,t,n){this.type=e,this.content=t,this.meta=n||{}},t.View.Parser=t.View.Parser||{},t.View.Parser.ExpressionType={UNKNOWN:"UNK",VIEW:"view",REPEATING_START:"for",REPEATING_END:"endfor",CONDITIONAL_START:"if",CONDITIONAL_END:"endif",ELSE:"else",getTypeForKeyword:function(e){return this.isKeyword(e)?e:this.UNKNOWN},isKeyword:function(e){if("string"!=typeof e)return!1;for(var t=Object.keys(this),n=t.length,r=0;r<n;r++)if(this[t[r]]===e)return!0;return!1}},t.View.Parser=t.View.Parser||{},t.View.Parser.Interface=t.CoreObject.extend({parse:function(e){throw new t.MissingImplementationError("parse")}}),t.View.Template=t.View.Template||{},t.View.Template.ParserInterface=t.CoreObject.extend({parse:function(e){throw new t.MissingImplementationError("parse")}}),t.View.Parser.Parser=t.View.Parser.Interface.extend({EXPRESSION_START:"{%",EXPRESSION_END:"%}",BLOCK_START_CHAR:"{",BLOCK_END_CHAR:"}",BLOCK_DELIMITER_REPEAT_NO_SAFE:2,BLOCK_DELIMITER_REPEAT_SAFE:3,PATTERN_VARIABLE:/^\{{2,3}\s*[a-zA-Z0-9\-_\.]+\s*}{2,3}$/,parse:function(e){if("string"!=typeof e)throw new TypeError('Expected argument "input" to be of type string, '+typeof e+" given");var t=this._tokenize(e);return this._analyze(t)},_analyze:function(e){var n,r,i,o,s,a=t.View.Parser.Block,u=t.View.Parser.BlockType,c=t.View.Parser.ExpressionType,l=this.PATTERN_VARIABLE,f=this.BLOCK_START_CHAR,h=this.BLOCK_END_CHAR,p=this.BLOCK_DELIMITER_REPEAT_NO_SAFE,d=this.BLOCK_DELIMITER_REPEAT_SAFE,v=this.EXPRESSION_START,y=this.EXPRESSION_END,w=new Array(p+1).join(f),m=v.length,g=e.length,_=[];for(s=0;s<g;s++)if(r=e[s],i=r.length,n=i>2&&r.substr(0,1)===f,n&&r.substr(0,p)===w&&l.test(r)){o=r.substring(p,i-p);var b=o.charAt(0)===f;b&&o.charAt(i-p-p-1)===h?_[s]=new a(u.VARIABLE,r.substring(d,i-d).trim(),{isSafe:!0}):b?_[s]=new a(u.STATIC,r):_[s]=new a(u.VARIABLE,o.trim(),{isSafe:!1})}else if(n&&r.substr(0,m)===v&&r.substr(i-m)==y){var E,T;o=r.substring(m,i-m),T=o.trim(),E=c.isKeyword(T)?T:c.isKeyword(T.substring(0,T.indexOf(" ")))?T.substring(0,T.indexOf(" ")):c.UNKNOWN,_[s]=new a(u.EXPRESSION,T,{expressionType:E})}else _[s]=new a(u.STATIC,r);return _},_tokenize:function(e){var t,n,r=e.length,i=this.BLOCK_START_CHAR,o=this.BLOCK_END_CHAR,s=[],a=0,u=0,c=0,l=0;do{if(e.charAt(a)===i){for(u=e.indexOf(o,a);e.charAt(u+1)===o&&u<r;)u++;t=u+1}else t=e.indexOf(i,a+1),u=t===-1?r:t-1;if(n=e.substr(a,u-a+1),s[c++]=n,++l>1e5)throw new Error("Infinite loop?");a=t}while(a!==-1);return s}})}()}(t)},function(e,t,n){var r,i;(function(){function n(e){function t(t,n,r,i,o,s){for(;o>=0&&o<s;o+=e){var a=i?i[o]:o;r=n(r,t[a],a,t)}return r}return function(n,r,i,o){r=T(r,o,4);var s=!N(n)&&E.keys(n),a=(s||n).length,u=e>0?0:a-1;return arguments.length<3&&(i=n[s?s[u]:u],u+=e),t(n,r,i,s,u,a)}}function o(e){return function(t,n,r){n=V(n,r);for(var i=S(t),o=e>0?0:i-1;o>=0&&o<i;o+=e)if(n(t[o],o,t))return o;return-1}}function s(e,t,n){return function(r,i,o){var s=0,a=S(r);if("number"==typeof o)e>0?s=o>=0?o:Math.max(o+a,s):a=o>=0?Math.min(o+1,a):o+a+1;else if(n&&o&&a)return o=n(r,i),r[o]===i?o:-1;if(i!==i)return o=t(d.call(r,s,a),E.isNaN),o>=0?o+s:-1;for(o=e>0?s:a-1;o>=0&&o<a;o+=e)if(r[o]===i)return o;return-1}}function a(e,t){var n=R.length,r=e.constructor,i=E.isFunction(r)&&r.prototype||f,o="constructor";for(E.has(e,o)&&!E.contains(t,o)&&t.push(o);n--;)o=R[n],o in e&&e[o]!==i[o]&&!E.contains(t,o)&&t.push(o)}var u=this,c=u._,l=Array.prototype,f=Object.prototype,h=Function.prototype,p=l.push,d=l.slice,v=f.toString,y=f.hasOwnProperty,w=Array.isArray,m=Object.keys,g=h.bind,_=Object.create,b=function(){},E=function(e){
return e instanceof E?e:this instanceof E?void(this._wrapped=e):new E(e)};"undefined"!=typeof e&&e.exports&&(t=e.exports=E),t._=E,E.VERSION="1.8.3";var T=function(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,o){return e.call(t,n,r,i,o)}}return function(){return e.apply(t,arguments)}},V=function(e,t,n){return null==e?E.identity:E.isFunction(e)?T(e,t,n):E.isObject(e)?E.matcher(e):E.property(e)};E.iteratee=function(e,t){return V(e,t,1/0)};var I=function(e,t){return function(n){var r=arguments.length;if(r<2||null==n)return n;for(var i=1;i<r;i++)for(var o=arguments[i],s=e(o),a=s.length,u=0;u<a;u++){var c=s[u];t&&void 0!==n[c]||(n[c]=o[c])}return n}},A=function(e){if(!E.isObject(e))return{};if(_)return _(e);b.prototype=e;var t=new b;return b.prototype=null,t},O=function(e){return function(t){return null==t?void 0:t[e]}},x=Math.pow(2,53)-1,S=O("length"),N=function(e){var t=S(e);return"number"==typeof t&&t>=0&&t<=x};E.each=E.forEach=function(e,t,n){t=T(t,n);var r,i;if(N(e))for(r=0,i=e.length;r<i;r++)t(e[r],r,e);else{var o=E.keys(e);for(r=0,i=o.length;r<i;r++)t(e[o[r]],o[r],e)}return e},E.map=E.collect=function(e,t,n){t=V(t,n);for(var r=!N(e)&&E.keys(e),i=(r||e).length,o=Array(i),s=0;s<i;s++){var a=r?r[s]:s;o[s]=t(e[a],a,e)}return o},E.reduce=E.foldl=E.inject=n(1),E.reduceRight=E.foldr=n(-1),E.find=E.detect=function(e,t,n){var r;if(r=N(e)?E.findIndex(e,t,n):E.findKey(e,t,n),void 0!==r&&r!==-1)return e[r]},E.filter=E.select=function(e,t,n){var r=[];return t=V(t,n),E.each(e,function(e,n,i){t(e,n,i)&&r.push(e)}),r},E.reject=function(e,t,n){return E.filter(e,E.negate(V(t)),n)},E.every=E.all=function(e,t,n){t=V(t,n);for(var r=!N(e)&&E.keys(e),i=(r||e).length,o=0;o<i;o++){var s=r?r[o]:o;if(!t(e[s],s,e))return!1}return!0},E.some=E.any=function(e,t,n){t=V(t,n);for(var r=!N(e)&&E.keys(e),i=(r||e).length,o=0;o<i;o++){var s=r?r[o]:o;if(t(e[s],s,e))return!0}return!1},E.contains=E.includes=E.include=function(e,t,n,r){return N(e)||(e=E.values(e)),("number"!=typeof n||r)&&(n=0),E.indexOf(e,t,n)>=0},E.invoke=function(e,t){var n=d.call(arguments,2),r=E.isFunction(t);return E.map(e,function(e){var i=r?t:e[t];return null==i?i:i.apply(e,n)})},E.pluck=function(e,t){return E.map(e,E.property(t))},E.where=function(e,t){return E.filter(e,E.matcher(t))},E.findWhere=function(e,t){return E.find(e,E.matcher(t))},E.max=function(e,t,n){var r,i,o=-(1/0),s=-(1/0);if(null==t&&null!=e){e=N(e)?e:E.values(e);for(var a=0,u=e.length;a<u;a++)r=e[a],r>o&&(o=r)}else t=V(t,n),E.each(e,function(e,n,r){i=t(e,n,r),(i>s||i===-(1/0)&&o===-(1/0))&&(o=e,s=i)});return o},E.min=function(e,t,n){var r,i,o=1/0,s=1/0;if(null==t&&null!=e){e=N(e)?e:E.values(e);for(var a=0,u=e.length;a<u;a++)r=e[a],r<o&&(o=r)}else t=V(t,n),E.each(e,function(e,n,r){i=t(e,n,r),(i<s||i===1/0&&o===1/0)&&(o=e,s=i)});return o},E.shuffle=function(e){for(var t,n=N(e)?e:E.values(e),r=n.length,i=Array(r),o=0;o<r;o++)t=E.random(0,o),t!==o&&(i[o]=i[t]),i[t]=n[o];return i},E.sample=function(e,t,n){return null==t||n?(N(e)||(e=E.values(e)),e[E.random(e.length-1)]):E.shuffle(e).slice(0,Math.max(0,t))},E.sortBy=function(e,t,n){return t=V(t,n),E.pluck(E.map(e,function(e,n,r){return{value:e,index:n,criteria:t(e,n,r)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(n<r||void 0===r)return-1}return e.index-t.index}),"value")};var P=function(e){return function(t,n,r){var i={};return n=V(n,r),E.each(t,function(r,o){var s=n(r,o,t);e(i,r,s)}),i}};E.groupBy=P(function(e,t,n){E.has(e,n)?e[n].push(t):e[n]=[t]}),E.indexBy=P(function(e,t,n){e[n]=t}),E.countBy=P(function(e,t,n){E.has(e,n)?e[n]++:e[n]=1}),E.toArray=function(e){return e?E.isArray(e)?d.call(e):N(e)?E.map(e,E.identity):E.values(e):[]},E.size=function(e){return null==e?0:N(e)?e.length:E.keys(e).length},E.partition=function(e,t,n){t=V(t,n);var r=[],i=[];return E.each(e,function(e,n,o){(t(e,n,o)?r:i).push(e)}),[r,i]},E.first=E.head=E.take=function(e,t,n){if(null!=e)return null==t||n?e[0]:E.initial(e,e.length-t)},E.initial=function(e,t,n){return d.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))},E.last=function(e,t,n){if(null!=e)return null==t||n?e[e.length-1]:E.rest(e,Math.max(0,e.length-t))},E.rest=E.tail=E.drop=function(e,t,n){return d.call(e,null==t||n?1:t)},E.compact=function(e){return E.filter(e,E.identity)};var C=function(e,t,n,r){for(var i=[],o=0,s=r||0,a=S(e);s<a;s++){var u=e[s];if(N(u)&&(E.isArray(u)||E.isArguments(u))){t||(u=C(u,t,n));var c=0,l=u.length;for(i.length+=l;c<l;)i[o++]=u[c++]}else n||(i[o++]=u)}return i};E.flatten=function(e,t){return C(e,t,!1)},E.without=function(e){return E.difference(e,d.call(arguments,1))},E.uniq=E.unique=function(e,t,n,r){E.isBoolean(t)||(r=n,n=t,t=!1),null!=n&&(n=V(n,r));for(var i=[],o=[],s=0,a=S(e);s<a;s++){var u=e[s],c=n?n(u,s,e):u;t?(s&&o===c||i.push(u),o=c):n?E.contains(o,c)||(o.push(c),i.push(u)):E.contains(i,u)||i.push(u)}return i},E.union=function(){return E.uniq(C(arguments,!0,!0))},E.intersection=function(e){for(var t=[],n=arguments.length,r=0,i=S(e);r<i;r++){var o=e[r];if(!E.contains(t,o)){for(var s=1;s<n&&E.contains(arguments[s],o);s++);s===n&&t.push(o)}}return t},E.difference=function(e){var t=C(arguments,!0,!0,1);return E.filter(e,function(e){return!E.contains(t,e)})},E.zip=function(){return E.unzip(arguments)},E.unzip=function(e){for(var t=e&&E.max(e,S).length||0,n=Array(t),r=0;r<t;r++)n[r]=E.pluck(e,r);return n},E.object=function(e,t){for(var n={},r=0,i=S(e);r<i;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},E.findIndex=o(1),E.findLastIndex=o(-1),E.sortedIndex=function(e,t,n,r){n=V(n,r,1);for(var i=n(t),o=0,s=S(e);o<s;){var a=Math.floor((o+s)/2);n(e[a])<i?o=a+1:s=a}return o},E.indexOf=s(1,E.findIndex,E.sortedIndex),E.lastIndexOf=s(-1,E.findLastIndex),E.range=function(e,t,n){null==t&&(t=e||0,e=0),n=n||1;for(var r=Math.max(Math.ceil((t-e)/n),0),i=Array(r),o=0;o<r;o++,e+=n)i[o]=e;return i};var j=function(e,t,n,r,i){if(!(r instanceof t))return e.apply(n,i);var o=A(e.prototype),s=e.apply(o,i);return E.isObject(s)?s:o};E.bind=function(e,t){if(g&&e.bind===g)return g.apply(e,d.call(arguments,1));if(!E.isFunction(e))throw new TypeError("Bind must be called on a function");var n=d.call(arguments,2),r=function(){return j(e,r,t,this,n.concat(d.call(arguments)))};return r},E.partial=function(e){var t=d.call(arguments,1),n=function(){for(var r=0,i=t.length,o=Array(i),s=0;s<i;s++)o[s]=t[s]===E?arguments[r++]:t[s];for(;r<arguments.length;)o.push(arguments[r++]);return j(e,n,this,this,o)};return n},E.bindAll=function(e){var t,n,r=arguments.length;if(r<=1)throw new Error("bindAll must be passed function names");for(t=1;t<r;t++)n=arguments[t],e[n]=E.bind(e[n],e);return e},E.memoize=function(e,t){var n=function(r){var i=n.cache,o=""+(t?t.apply(this,arguments):r);return E.has(i,o)||(i[o]=e.apply(this,arguments)),i[o]};return n.cache={},n},E.delay=function(e,t){var n=d.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},E.defer=E.partial(E.delay,E,1),E.throttle=function(e,t,n){var r,i,o,s=null,a=0;n||(n={});var u=function(){a=n.leading===!1?0:E.now(),s=null,o=e.apply(r,i),s||(r=i=null)};return function(){var c=E.now();a||n.leading!==!1||(a=c);var l=t-(c-a);return r=this,i=arguments,l<=0||l>t?(s&&(clearTimeout(s),s=null),a=c,o=e.apply(r,i),s||(r=i=null)):s||n.trailing===!1||(s=setTimeout(u,l)),o}},E.debounce=function(e,t,n){var r,i,o,s,a,u=function(){var c=E.now()-s;c<t&&c>=0?r=setTimeout(u,t-c):(r=null,n||(a=e.apply(o,i),r||(o=i=null)))};return function(){o=this,i=arguments,s=E.now();var c=n&&!r;return r||(r=setTimeout(u,t)),c&&(a=e.apply(o,i),o=i=null),a}},E.wrap=function(e,t){return E.partial(t,e)},E.negate=function(e){return function(){return!e.apply(this,arguments)}},E.compose=function(){var e=arguments,t=e.length-1;return function(){for(var n=t,r=e[t].apply(this,arguments);n--;)r=e[n].call(this,r);return r}},E.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},E.before=function(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}},E.once=E.partial(E.before,2);var L=!{toString:null}.propertyIsEnumerable("toString"),R=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];E.keys=function(e){if(!E.isObject(e))return[];if(m)return m(e);var t=[];for(var n in e)E.has(e,n)&&t.push(n);return L&&a(e,t),t},E.allKeys=function(e){if(!E.isObject(e))return[];var t=[];for(var n in e)t.push(n);return L&&a(e,t),t},E.values=function(e){for(var t=E.keys(e),n=t.length,r=Array(n),i=0;i<n;i++)r[i]=e[t[i]];return r},E.mapObject=function(e,t,n){t=V(t,n);for(var r,i=E.keys(e),o=i.length,s={},a=0;a<o;a++)r=i[a],s[r]=t(e[r],r,e);return s},E.pairs=function(e){for(var t=E.keys(e),n=t.length,r=Array(n),i=0;i<n;i++)r[i]=[t[i],e[t[i]]];return r},E.invert=function(e){for(var t={},n=E.keys(e),r=0,i=n.length;r<i;r++)t[e[n[r]]]=n[r];return t},E.functions=E.methods=function(e){var t=[];for(var n in e)E.isFunction(e[n])&&t.push(n);return t.sort()},E.extend=I(E.allKeys),E.extendOwn=E.assign=I(E.keys),E.findKey=function(e,t,n){t=V(t,n);for(var r,i=E.keys(e),o=0,s=i.length;o<s;o++)if(r=i[o],t(e[r],r,e))return r},E.pick=function(e,t,n){var r,i,o={},s=e;if(null==s)return o;E.isFunction(t)?(i=E.allKeys(s),r=T(t,n)):(i=C(arguments,!1,!1,1),r=function(e,t,n){return t in n},s=Object(s));for(var a=0,u=i.length;a<u;a++){var c=i[a],l=s[c];r(l,c,s)&&(o[c]=l)}return o},E.omit=function(e,t,n){if(E.isFunction(t))t=E.negate(t);else{var r=E.map(C(arguments,!1,!1,1),String);t=function(e,t){return!E.contains(r,t)}}return E.pick(e,t,n)},E.defaults=I(E.allKeys,!0),E.create=function(e,t){var n=A(e);return t&&E.extendOwn(n,t),n},E.clone=function(e){return E.isObject(e)?E.isArray(e)?e.slice():E.extend({},e):e},E.tap=function(e,t){return t(e),e},E.isMatch=function(e,t){var n=E.keys(t),r=n.length;if(null==e)return!r;for(var i=Object(e),o=0;o<r;o++){var s=n[o];if(t[s]!==i[s]||!(s in i))return!1}return!0};var k=function(e,t,n,r){if(e===t)return 0!==e||1/e===1/t;if(null==e||null==t)return e===t;e instanceof E&&(e=e._wrapped),t instanceof E&&(t=t._wrapped);var i=v.call(e);if(i!==v.call(t))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!==+e?+t!==+t:0===+e?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t}var o="[object Array]"===i;if(!o){if("object"!=typeof e||"object"!=typeof t)return!1;var s=e.constructor,a=t.constructor;if(s!==a&&!(E.isFunction(s)&&s instanceof s&&E.isFunction(a)&&a instanceof a)&&"constructor"in e&&"constructor"in t)return!1}n=n||[],r=r||[];for(var u=n.length;u--;)if(n[u]===e)return r[u]===t;if(n.push(e),r.push(t),o){if(u=e.length,u!==t.length)return!1;for(;u--;)if(!k(e[u],t[u],n,r))return!1}else{var c,l=E.keys(e);if(u=l.length,E.keys(t).length!==u)return!1;for(;u--;)if(c=l[u],!E.has(t,c)||!k(e[c],t[c],n,r))return!1}return n.pop(),r.pop(),!0};E.isEqual=function(e,t){return k(e,t)},E.isEmpty=function(e){return null==e||(N(e)&&(E.isArray(e)||E.isString(e)||E.isArguments(e))?0===e.length:0===E.keys(e).length)},E.isElement=function(e){return!(!e||1!==e.nodeType)},E.isArray=w||function(e){return"[object Array]"===v.call(e)},E.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},E.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(e){E["is"+e]=function(t){return v.call(t)==="[object "+e+"]"}}),E.isArguments(arguments)||(E.isArguments=function(e){return E.has(e,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(E.isFunction=function(e){return"function"==typeof e||!1}),E.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},E.isNaN=function(e){return E.isNumber(e)&&e!==+e},E.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"===v.call(e)},E.isNull=function(e){return null===e},E.isUndefined=function(e){return void 0===e},E.has=function(e,t){return null!=e&&y.call(e,t)},E.noConflict=function(){return u._=c,this},E.identity=function(e){return e},E.constant=function(e){return function(){return e}},E.noop=function(){},E.property=O,E.propertyOf=function(e){return null==e?function(){}:function(t){return e[t]}},E.matcher=E.matches=function(e){return e=E.extendOwn({},e),function(t){return E.isMatch(t,e)}},E.times=function(e,t,n){var r=Array(Math.max(0,e));t=T(t,n,1);for(var i=0;i<e;i++)r[i]=t(i);return r},E.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},E.now=Date.now||function(){return(new Date).getTime()};var D={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},M=E.invert(D),K=function(e){var t=function(t){return e[t]},n="(?:"+E.keys(e).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(e){return e=null==e?"":""+e,r.test(e)?e.replace(i,t):e}};E.escape=K(D),E.unescape=K(M),E.result=function(e,t,n){var r=null==e?void 0:e[t];return void 0===r&&(r=n),E.isFunction(r)?r.call(e):r};var F=0;E.uniqueId=function(e){var t=++F+"";return e?e+t:t},E.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var B=/(.)^/,H={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},U=/\\|'|\r|\n|\u2028|\u2029/g,q=function(e){return"\\"+H[e]};E.template=function(e,t,n){!t&&n&&(t=n),t=E.defaults({},t,E.templateSettings);var r=RegExp([(t.escape||B).source,(t.interpolate||B).source,(t.evaluate||B).source].join("|")+"|$","g"),i=0,o="__p+='";e.replace(r,function(t,n,r,s,a){return o+=e.slice(i,a).replace(U,q),i=a+t.length,n?o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?o+="'+\n((__t=("+r+"))==null?'':__t)+\n'":s&&(o+="';\n"+s+"\n__p+='"),t}),o+="';\n",t.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var s=new Function(t.variable||"obj","_",o)}catch(a){throw a.source=o,a}var u=function(e){return s.call(this,e,E)},c=t.variable||"obj";return u.source="function("+c+"){\n"+o+"}",u},E.chain=function(e){var t=E(e);return t._chain=!0,t};var z=function(e,t){return e._chain?E(t).chain():t};E.mixin=function(e){E.each(E.functions(e),function(t){var n=E[t]=e[t];E.prototype[t]=function(){var e=[this._wrapped];return p.apply(e,arguments),z(this,n.apply(E,e))}})},E.mixin(E),E.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=l[e];E.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0],z(this,n)}}),E.each(["concat","join","slice"],function(e){var t=l[e];E.prototype[e]=function(){return z(this,t.apply(this._wrapped,arguments))}}),E.prototype.value=function(){return this._wrapped},E.prototype.valueOf=E.prototype.toJSON=E.prototype.value,E.prototype.toString=function(){return""+this._wrapped},r=[],i=function(){return E}.apply(t,r),!(void 0!==i&&(e.exports=i))}).call(this)}]);